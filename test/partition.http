# -------HTTP REST CLIENT -------
# https://marketplace.visualstudio.com/items?itemName=humao.rest-client
#
# Purpose: Sample requests for Partition Service
#          Requires CLIENT_SECRET available in KV
#          Create, Update and Delete should never be used

@login_base = login.microsoftonline.com/{{TENANT_ID}}
@oauth_token_host = {{login_base}}/oauth2/v2.0/token

# -----------------------
# OAUTH  CLIENT
# -----------------------
###
# @name login
@login_base = login.microsoftonline.com/{{TENANT_ID}}
@oauth_token_host = {{login_base}}/oauth2/token
POST https://{{oauth_token_host}} HTTP/1.1
Content-Type: application/x-www-form-urlencoded

grant_type=client_credentials
&client_id={{CLIENT_ID}}
&client_secret={{CLIENT_SECRET}}
&resource={{CLIENT_ID}}


# -----------------------
# API (Variables)
# -----------------------
###
@access_token = {{login.response.body.access_token}}
# @ENDPOINT = https://{{HOST}}
@ENDPOINT = http://localhost:8080
@PARTITION_HOST = {{ENDPOINT}}/api/partition/v1


# -----------------------
# API: Version
# -----------------------

###
# @name info
GET {{PARTITION_HOST}}/info
Authorization: Bearer {{access_token}}
Accept: application/json

# -----------------------
# API: Partition
# -----------------------

###
# @name getPartitions
GET {{PARTITION_HOST}}/partitions/
Authorization: Bearer {{access_token}}
Accept: application/json
x-payload: ZXlKMGVYQWlPaUpLVjFRaUxDSmhiR2NpT2lKU1V6STFOaUlzSW5nMWRDSTZJbkV0TWpObVlXeGxkbHBvYUVRemFHMDVRMUZpYTFBMVRWRjVWU0lzSW10cFpDSTZJbkV0TWpObVlXeGxkbHBvYUVRemFHMDVRMUZpYTFBMVRWRjVWU0o5LmV5SmhkV1FpT2lJNE9EQXpNalJoTWkxbVpUbGpMVFExTURjdFlUaGlaaTA1TlRjMFlXTTBNREF6WTJZaUxDSnBjM01pT2lKb2RIUndjem92TDNOMGN5NTNhVzVrYjNkekxtNWxkQzgzTW1ZNU9EaGlaaTA0Tm1ZeExUUXhZV1l0T1RGaFlpMHlaRGRqWkRBeE1XUmlORGN2SWl3aWFXRjBJam94TnpFeU16STBNVGN3TENKdVltWWlPakUzTVRJek1qUXhOekFzSW1WNGNDSTZNVGN4TWpReE1EZzNNQ3dpWVdsdklqb2lSVEpPWjFsR1FsZ3plak55YTJ4RlYzbzJOMDR6YVRaMlNIaHBiRUYzUVQwaUxDSmhjSEJwWkNJNklqZzRNRE15TkdFeUxXWmxPV010TkRVd055MWhPR0ptTFRrMU56UmhZelF3TUROalppSXNJbUZ3Y0dsa1lXTnlJam9pTVNJc0ltbGtjQ0k2SW1oMGRIQnpPaTh2YzNSekxuZHBibVJ2ZDNNdWJtVjBMemN5WmprNE9HSm1MVGcyWmpFdE5ERmhaaTA1TVdGaUxUSmtOMk5rTURFeFpHSTBOeThpTENKdmFXUWlPaUk1WlRCa09HVmhNUzA0WTJKbUxUUTVPREF0WWpZNU5TMHhaVFkxTmpOak16RTBNakFpTENKeWFDSTZJakF1UVZKdlFYWTBhalZqZGtkSGNqQkhVbkY1TVRnd1FraGlValpKYTBFMGFXTmZaMlJHY1V3dFZtUkxlRUZCT0RoaFFVRkJMaUlzSW5OMVlpSTZJamxsTUdRNFpXRXhMVGhqWW1ZdE5EazRNQzFpTmprMUxURmxOalUyTTJNek1UUXlNQ0lzSW5ScFpDSTZJamN5WmprNE9HSm1MVGcyWmpFdE5ERmhaaTA1TVdGaUxUSmtOMk5rTURFeFpHSTBOeUlzSW5WMGFTSTZJazQxUmsxdVNEQjFSV3Q1UlhodlFsODRWMUp0UVVFaUxDSjJaWElpT2lJeExqQWlmUS5LMEQyRFZDOHFMeTZpbV90U3J6R3pBNTZKTnBGUTlCbjBTcjBtaTRHd3FiTnRBS3FqLU5rMW9MRFlEbWFyY3lpb1VERHMxNGxLQUllZDgyYXdkSmR4cjROam9pbFhQS2RqcE1hRElZM2paQThiazBydWRNUG0wSV9lZTRYV0J0MDBidkQ0amNpNW5GSjhzTG5vbnhBSjZhVTZYcmotVC0xeXVWZUt2VWxnZ0E0UE05bjBkZGo2OGM4ZjMtejBmNXZtZG9tQTBOemx3dHl2MGdvb180NTA4VDFlc3M5TU9KM3JJdllBcUdrZHNZNF9vb1dWeUloN0JFTVl1bG9RYWw3LVVsNGt2V0hTSkNKc2ZiRy1IRWlWQngwMVo2WVMwMTV5U204cGlOd2oxYVZTLVBady1rRTVieGdRRUQ0RFU5YTlubnpieE5zN2VUaU9TYW9IeVFrMmc=

@partition = {{getPartitions.response.body.$[0]}}


###
# @name getPartition
GET {{PARTITION_HOST}}/partitions/{{partition}}
Authorization: Bearer {{access_token}}
Content-Type: application/json
